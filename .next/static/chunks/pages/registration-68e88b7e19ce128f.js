(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{3925:function(e,t,n){"use strict";n.d(t,{q5:function(){return c},r4:function(){return d},pH:function(){return f},TX:function(){return m},xj:function(){return x}});var r=n(5861),a=n(7757),s=n.n(a),i=n(9669),o=n.n(i),u=n(1163);o().defaults.withCredentials=!0;var l="__USER__",c=function(e){return function(t){var n=t.req,r=t.res,a=n?function(e){var t=e.signedCookies,n=void 0===t?{}:t;return n&&n.token?{user:n.token}:{}}(n):{user:window[l]||{}},s=n?n.url:window.location.pathname,i=a.user,o=!i||"authenticated"!==i.type;return e&&o&&"/login"!==s?p(r,"/login"):{auth:a}}},p=function(e,t){return e?(e.redirect(302,t),e.finished=!0,{}):(u.default.replace(t),{})},d=function(){var e=(0,r.Z)(s().mark((function e(t,n,r,a){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().post("/api/reg",{name:t,email:n,password:r,refer:a});case 2:if(i=e.sent,console.log(i),!i.data){e.next=8;break}u.default.push("/login"),e.next=9;break;case 8:throw new Error("Email \u0443\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f");case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),h=o().create({baseURL:"http://localhost:3000/api/",method:"post",headers:{"X-Custom-Header":"foobar"}}),f=function(){var e=(0,r.Z)(s().mark((function e(t,n){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("APIurl: ","http://localhost:3000/api/"),e.next=3,h({url:"login",data:{email:t,password:n}});case 3:r=e.sent,a=r.data,console.log("kek"),console.log(a),console.log("kek2"),window[l]=a||{};case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window[l]={},e.next=3,o().post("/api/logout");case 3:u.default.push("/login");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=(o().create({baseURL:"http://localhost:3000/api/",headers:{"X-Custom-Header":"foobar"}}),function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,console.log("eto kiqikam",n),e.next=4,o().post("/api/payadv",{qiwikam:n});case 4:return r=e.sent,console.log("eto qiwi",r.data),u.default.push(r.data.payment_url),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},2167:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(5671),a=n(3144),s=n(7326),i=n(136),o=n(245),u=n(1120),l=n(4942),c=(n(1163),n(7294)),p=n(3925),d=n(5893);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var f=function(e){(0,i.Z)(n,e);var t=h(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,l.Z)((0,s.Z)(e),"state",{name:"",email:"",password:"",error:"",isLoading:!1,refer:""}),(0,l.Z)((0,s.Z)(e),"handleChange",(function(t){e.setState((0,l.Z)({},t.target.name,t.target.value))})),(0,l.Z)((0,s.Z)(e),"handleSubmit",(function(t){var n=e.state,r=n.name,a=n.email,s=n.password,i=n.refer;t.preventDefault(),e.setState({error:"",isLoading:!0}),(0,p.r4)(r,a,s,i).then((function(){console.log(r,a,s,i)})).catch(e.showError)})),(0,l.Z)((0,s.Z)(e),"showError",(function(t){console.error(t);var n=t.response&&t.response.data||t.message;e.setState({error:n})})),e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,r=e.password,a=e.refer,s=e.error;e.isLoading;return(0,d.jsxs)("div",{className:"main-w3layouts wrapper",children:[(0,d.jsx)("h1",{children:" \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f "}),(0,d.jsx)("div",{className:"main-agileinfo",children:(0,d.jsxs)("div",{className:"agileits-top",children:[(0,d.jsxs)("form",{onSubmit:this.handleSubmit,children:["\u0418\u043c\u044f",(0,d.jsx)("input",{className:"text input-text",type:"text",name:"name",placeholder:"Name",required:"",value:t,onChange:this.handleChange}),(0,d.jsx)("br",{}),"Email",(0,d.jsx)("input",{className:"text email input-email",type:"email",name:"email",placeholder:"Email",required:"",value:n,onChange:this.handleChange}),"\u041f\u0430\u0440\u043e\u043b\u044c",(0,d.jsx)("input",{className:"text input-password",type:"password",name:"password",placeholder:"Password",required:"",value:r,onChange:this.handleChange})," ",(0,d.jsx)("br",{}),"Email \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0432\u0448\u0435\u0433\u043e:",(0,d.jsx)("input",{className:"text input-text",type:"text",name:"refer",placeholder:"\u0420\u0435\u0444\u0435\u0440\u0430\u043b",required:"",value:a,onChange:this.handleChange}),(0,d.jsxs)("div",{className:"wthree-text",children:[(0,d.jsxs)("label",{className:"anim",children:[(0,d.jsx)("input",{type:"checkbox",className:"checkbox",required:""}),(0,d.jsx)("span",{children:"I Agree To The Terms  Conditions"})]}),(0,d.jsx)("div",{className:"clear",children:" "})]}),(0,d.jsx)("input",{className:"input-submit",type:"submit",value:"SIGNUP"}),s&&(0,d.jsx)("div",{children:s})]}),(0,d.jsxs)("p",{children:["\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442? ",(0,d.jsx)("a",{href:"/login",children:" \u0412\u043e\u0439\u0442\u0438!"})]})]})}),(0,d.jsxs)("ul",{className:"colorlib-bubbles",children:[(0,d.jsx)("li",{}),(0,d.jsx)("li",{}),(0,d.jsx)("li",{}),(0,d.jsx)("li",{}),(0,d.jsx)("li",{}),(0,d.jsx)("li",{}),(0,d.jsx)("li",{}),(0,d.jsx)("li",{}),(0,d.jsx)("li",{}),(0,d.jsx)("li",{})]})]})}}]),n}(c.Component)},5531:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/registration",function(){return n(2167)}])}},function(e){e.O(0,[160,774,888,179],(function(){return t=5531,e(e.s=t);var t}));var t=e.O();_N_E=t}]);